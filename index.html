<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>BerOn Mini App</title>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
<style>
  body {margin:0;font-family:sans-serif;background:#0d1b3a;color:#fff;display:flex;justify-content:center;align-items:center;min-height:100vh;}
  .app-container {width:400px;padding:20px;background:rgba(10,25,60,0.8);border-radius:20px;box-shadow:0 0 30px #1e3cff;text-align:center;position:relative;overflow:hidden;}
  .coin-button {width:200px;height:200px;border-radius:50%;background:linear-gradient(135deg,#1e3cff,#3f6eff);display:flex;justify-content:center;align-items:center;font-size:3rem;box-shadow:0 0 80px #1e3cff;margin:20px auto;cursor:pointer;border:none;}
  .tabs {display:flex;justify-content:space-around;margin-top:20px;}
  .tab-btn {cursor:pointer;padding:5px 10px;border-radius:10px;}
  .tab-active {color:#1e3cff;font-weight:bold;}
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect } = React;
const { motion, AnimatePresence } = window["framer-motion"];

function App() {
  const [coins, setCoins] = useState(() => Number(localStorage.getItem("coins") || 0));
  const [energy, setEnergy] = useState(() => Number(localStorage.getItem("energy") || 1000));
  const [activeTab, setActiveTab] = useState("mine");
  const [shake, setShake] = useState(false);
  const [critEffect, setCritEffect] = useState(null);
  const [flyingCoins, setFlyingCoins] = useState([]);
  const maxEnergy = 1000;

  useEffect(() => {
    const interval = setInterval(() => setEnergy(e => Math.min(maxEnergy, e + 3)), 1000);
    return () => clearInterval(interval);
  }, []);

  useEffect(() => { localStorage.setItem("coins", coins); }, [coins]);
  useEffect(() => { localStorage.setItem("energy", energy); }, [energy]);

  const spawnCoins = () => {
    const newCoins = Array.from({ length: 6 }).map(() => ({
      id: Math.random(), x: (Math.random()-0.5)*120, y: -Math.random()*120
    }));
    setFlyingCoins(prev => [...prev, ...newCoins]);
    setTimeout(() => setFlyingCoins(prev => prev.slice(6)), 800);
  };

  const handleTap = () => {
    if (energy <= 0) return;
    let reward = 1;
    const isMegaCrit = Math.random() < 0.05;
    const isUltraCrit = Math.random() < 0.01;
    if (isUltraCrit) reward *= 20;
    else if (isMegaCrit) reward *= 5;
    setCoins(c => c + reward);
    setEnergy(e => e - 1);
    spawnCoins();
    if (isUltraCrit) { setCritEffect("ULTRA CRIT ðŸ”¥"); triggerShake(); }
    else if (isMegaCrit) setCritEffect("MEGA CRIT ðŸ˜ˆ");
    else setCritEffect(null);
    setTimeout(() => setCritEffect(null), 600);
  };

  const triggerShake = () => { setShake(true); setTimeout(() => setShake(false), 400); };
  const openCase = () => { setCoins(c => c + Math.floor(Math.random()*800+200)); triggerShake(); };
  const fightPvP = () => { setCoins(c => c + 300); triggerShake(); };

  return (
    <div className={`app-container ${shake ? "animate-pulse" : ""}`}>
      <h1 style={{color:"#1e3cff"}}>BerOn âš¡</h1>
      <p>BER Coins: {coins}</p>
      <p>Energy: {energy}/{maxEnergy}</p>

      <div className="tabs">
        <span className={`tab-btn ${activeTab==="mine"?"tab-active":""}`} onClick={()=>setActiveTab("mine")}>âš¡ Mine</span>
        <span className={`tab-btn ${activeTab==="cases"?"tab-active":""}`} onClick={()=>setActiveTab("cases")}>ðŸŽ° Cases</span>
        <span className={`tab-btn ${activeTab==="withdraw"?"tab-active":""}`} onClick={()=>setActiveTab("withdraw")}>ðŸ’¸ Withdraw</span>
        <span className={`tab-btn ${activeTab==="pvp"?"tab-active":""}`} onClick={()=>setActiveTab("pvp")}>âš” PvP</span>
      </div>

      <AnimatePresence>
      {activeTab==="mine" && (
        <motion.div initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
          <motion.button className="coin-button" onClick={handleTap} whileTap={{scale:0.9}}>âš¡</motion.button>
        </motion.div>
      )}
      {activeTab==="cases" && (
        <motion.div initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
          <button onClick={openCase} style={{marginTop:"20px",padding:"10px 20px",borderRadius:"15px",background:"#1e3cff",color:"#fff"}}>ðŸ”¥ OPEN CASE ðŸ”¥</button>
        </motion.div>
      )}
      {activeTab==="withdraw" && (
        <motion.div initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
          <p style={{marginTop:"20px",color:"#88bfff"}}>Withdraw coming soon ðŸ˜ˆðŸ”¥</p>
        </motion.div>
      )}
      {activeTab==="pvp" && (
        <motion.div initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
          <button onClick={fightPvP} style={{marginTop:"20px",padding:"10px 20px",borderRadius:"15px",background:"#1e3cf
